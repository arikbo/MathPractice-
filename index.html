<!DOCTYPE html>
<html lang="he" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>תרגול מספרים מכוונים</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; direction: ltr; }
        .exercise { font-size: 24px; margin: 10px; }
        input { font-size: 20px; width: 80px; text-align: center; }
        .correct { color: green; font-weight: bold; }
        .incorrect { color: red; font-weight: bold; }
        .result { font-size: 20px; margin-top: 20px; }
        .new-try { font-size: 18px; padding: 10px; margin-top: 20px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>תרגול מספרים מכוונים</h1>
    <div id="exercises"></div>
    <button class="new-try" onclick="generateExercises()">ניסיון חדש</button>
    <div id="score" class="result"></div>
    <footer>האתר נבנה על ידי אריק בוריסי ©️</footer>

    <script>
        function generateExercises() {
            const operators = ['+', '-', '*', '/'];
            const exercisesDiv = document.getElementById('exercises');
            exercisesDiv.innerHTML = '';
            window.correctAnswers = 0;
            window.totalQuestions = 10;
            
            for (let i = 0; i < 10; i++) {
                let num1 = Math.floor(Math.random() * 21) - 10;
                let num2 = Math.floor(Math.random() * 21) - 10;
                let op = operators[Math.floor(Math.random() * operators.length)];
                
                if (op === '/' && num2 === 0) num2 = 1; 
                
                let expression = `${formatNumber(num1)} ${op} ${formatNumber(num2)}`;
                let solution = eval(expression.replace('−', '-'));
                
                let div = document.createElement('div');
                div.className = 'exercise';
                div.innerHTML = `
                    \(${expression}\) = <input type="text" oninput="checkAnswer(this, ${solution})">
                    <span class="feedback"></span>
                `;
                exercisesDiv.appendChild(div);
            }
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }

        function formatNumber(num) {
            return num < 0 ? `(${num})` : num;
        }
        
        function checkAnswer(input, correctAnswer) {
            let feedback = input.nextElementSibling;
            if (input.value.trim() !== "") {
                if (parseFloat(input.value) === correctAnswer) {
                    feedback.innerHTML = '✔';
                    feedback.className = 'correct';
                    window.correctAnswers++;
                } else {
                    feedback.innerHTML = '✖';
                    feedback.className = 'incorrect';
                }
                updateScore();
            } else {
                feedback.innerHTML = '';
            }
        }
        
        function updateScore() {
            let scoreDiv = document.getElementById('score');
            let percentage = (window.correctAnswers / window.totalQuestions) * 100;
            scoreDiv.innerHTML = `נכונות: ${window.correctAnswers} מתוך ${window.totalQuestions} (ציון: ${percentage.toFixed(1)}%)`;
        }
        
        window.onload = generateExercises;
    </script>
</body>
</html>
